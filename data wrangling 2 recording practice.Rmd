---
title: "data-wrangling 2 practice"
author: "Seonyoung Park (sp3804)"
date: "11/1/2020"
output: github_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(rvest)
library(httr)
```

## Scrap a table

I want the first table from [this http://samhda.s3-us-gov-west-1.amazonaws.com/s3fs-public/field-uploads/2k15StateFiles/NSDUHsaeShortTermCHG2015.htm]

read in the html

```{r}
url = "http://samhda.s3-us-gov-west-1.amazonaws.com/s3fs-public/field-uploads/2k15StateFiles/NSDUHsaeShortTermCHG2015.htm"
drug_use_html = read_html(url)

```

1. extract the table(s); from the website, I've extracted all the tables
2. I'm gonna focus on the first one
3. get html table
4. cut the first row (the “note” at the bottom of the table appears in every column in the first row.)
5. change it to table

```{r}
table_mar = 
  drug_use_html %>%
  html_nodes(css = "table") %>%
  first() %>%
  html_table %>%
  slice(-1) %>%
  as_tibble()

table_mar
```


